# otus_mdadm_RAID

–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ: —Ä–∞–±–æ—Ç–∞ —Å mdadm
–ó–∞–¥–∞–Ω–∏–µ
‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏—Å–∫–æ–≤
‚Ä¢ –°–æ–±—Ä–∞—Ç—å RAID-0/1/5/10 –Ω–∞ –≤—ã–±–æ—Ä
‚Ä¢ –°–ª–æ–º–∞—Ç—å –∏ –ø–æ—á–∏–Ω–∏—Ç—å RAID
‚Ä¢ –°–æ–∑–¥–∞—Ç—å GPT —Ç–∞–±–ª–∏—Ü—É, –ø—è—Ç—å —Ä–∞–∑–¥–µ–ª–æ–≤ –∏ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ —Å–∏—Å—Ç–µ–º–µ.
–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–ø—Ä–∞–≤—å—Ç–µ:
‚Ä¢ C–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–π–¥–∞, 
‚Ä¢ –û—Ç—á–µ—Ç –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –¥–ª—è –ø–æ—á–∏–Ω–∫–∏ RAID –∏ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–∞–∑–¥–µ–ª–æ–≤.



## üß≠ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [üì¶ –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –Ω–∞–≥—Ä—É–∑–∫–∞](#-–¥–∏—Å–∫–æ–≤–æ–µ-–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ-–∏-–Ω–∞–≥—Ä—É–∑–∫–∞)
- [üìã –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –ª–æ–≥–∏](#-–ø—Ä–æ—Ü–µ—Å—Å—ã-–∏-–ª–æ–≥–∏)
- [‚è± –í—Ä–µ–º—è –∏ —Ç–∞–π–º–∑–æ–Ω–∞](#-–≤—Ä–µ–º—è-–∏-—Ç–∞–π–º–∑–æ–Ω–∞)
- [üíΩ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-—É–¥–∞–ª–µ–Ω–∏–µ-–ø–∞–∫–µ—Ç–æ–≤)
- [üê≥ Docker](#-docker)
- [üåê –°–µ—Ç—å](#-—Å–µ—Ç—å)
- [üìÄ –î–∏—Å–∫–∏ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞](#-–¥–∏—Å–∫–∏-–∏-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- [üß† –ü–∞–º—è—Ç—å –∏ —Å–ª—É–∂–±—ã](#-–ø–∞–º—è—Ç—å-–∏-—Å–ª—É–∂–±—ã)
- [üêß –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ](#-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è-–æ-—Å–∏—Å—Ç–µ–º–µ)
- [üß± –†–∞–∑–º–µ—Ç–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Å–∫–∞](#-—Ä–∞–∑–º–µ—Ç–∫–∞-–∏-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–¥–∏—Å–∫–∞)
- [‚úÇÔ∏è –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ä–∞–∑–¥–µ–ª–∞](#Ô∏è-—É–º–µ–Ω—å—à–µ–Ω–∏–µ-—Ä–∞–∑–º–µ—Ä–∞-–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ-—Ä–∞–∑–¥–µ–ª–∞-sdb4--5g)
- [üóÉÔ∏è RAID 1 –Ω–∞ Ubuntu](#Ô∏è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-raid-1-–Ω–∞-ubuntu-—Å-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º-mdadm)
- [üí• –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–∞ –¥–∏—Å–∫–∞](#-—Å–∏–º—É–ª—è—Ü–∏—è-–æ—Ç–∫–∞–∑–∞-–¥–∏—Å–∫–∞-–≤-raid-1-–∏-–µ–≥–æ-–∑–∞–º–µ–Ω–∞)
- [üõ†Ô∏è RAID –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö](#-—Å–æ–∑–¥–∞–Ω–∏–µ-raid-1-–±–µ–∑-–ø–æ—Ç–µ—Ä–∏-–¥–∞–Ω–Ω—ã—Ö-–Ω–∞-linux)
- [üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- [üìù –õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üì¶ –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –Ω–∞–≥—Ä—É–∑–∫–∞

```bash
# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–≤–æ–±–æ–¥–Ω–æ–º –∏ –∑–∞–Ω—è—Ç–æ–º –º–µ—Å—Ç–µ –Ω–∞ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¥–∏—Å–∫–∞—Ö –≤ —É–¥–æ–±–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–ì–ë/–ú–ë)
df -h
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ (–≤–∫–ª—é—á–∞—è –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏) –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ
du . -hs
# –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—É—â–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –µ–≥–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ (–≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî 1 —É—Ä–æ–≤–µ–Ω—å)             
du . -hd1
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —Å–æ—Ä—Ç–∏—Ä—É—è –∏—Ö –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é —Ä–∞–∑–º–µ—Ä–∞ (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ä–æ–¥–µ 10K, 2G)
sudo du . -hd1 | sort -h
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)
iotop
```

---

## üìã –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –ª–æ–≥–∏

```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å journald (—Å–∏—Å—Ç–µ–º–Ω—ã–π –∂—É—Ä–Ω–∞–ª)
ps afx | grep journ
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å rsyslog (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
ps afx | grep rsysc
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ª–æ–≥–æ–≤ Grafana
cd /var/log/grafana
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ Grafana
sudo tail grafana.log
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ Grafana
sudo tail -n 100 grafana.log
# –†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏: –≤—ã–≤–æ–¥ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –ª–æ–≥–∞ Grafana –ø–æ –º–µ—Ä–µ –∏—Ö –ø–æ—è–≤–ª–µ–Ω–∏—è
sudo tail -f grafana.log
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤—ã—Ö 10 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ Grafana
sudo head grafana.log
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –∂—É—Ä–Ω–∞–ª–µ (journald
journalctl | grep err
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º
journalctl -b
–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–ª—É–∂–±—ã nginx —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
journalctl -b -u nginx.service
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ (ERROR) –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (WARN) –≤ –ª–æ–≥–∞—Ö —Å–ª—É–∂–±—ã Kibana. --no-pager –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –≤—ã–≤–æ–¥
sudo journalctl -u kibana --no-pager | grep -E 'ERROR|WARN'
```

---

## ‚è± –í—Ä–µ–º—è –∏ —Ç–∞–π–º–∑–æ–Ω–∞

```bash
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –¥–∞—Ç—ã, —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ –∏ —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å NTP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
timedatectl status
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –ú–æ—Å–∫–≤–∞ (Europe/Moscow)
timedatectl set-timezone Europe/Moscow
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–æ–Ω
timedatectl list-timezones
# –í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–∏ —Å NTP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏
sudo timedatectl set-ntp true
```

---

## üíΩ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤

```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ DEB-–ø–∞–∫–µ—Ç–∞ Google Chrome —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ URL
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º—É
sudo dpkg -i google-chrome-stable_current_amd64.deb
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (—á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ dpkg -i
sudo apt install -f
# –ü–æ–∏—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ chrome
dpkg -l | grep chrome
# –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ google-chrome-stable (–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
sudo dpkg -r google-chrome-stable
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ (update) –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ (upgrade) –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (-y)
sudo apt update && sudo apt upgrade -y
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Nginx —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º (-y)
sudo apt install nginx -y 
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–ª—É–∂–±—ã Nginx: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –æ–Ω–∞, –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞
sudo systemctl status nginx
```

---

## üê≥ Docker

```bash
# –í—Ö–æ–¥ –≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä outline —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (root) –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ (–∫–æ–º–∞–Ω–¥–Ω–∞—è –æ–±–æ–ª–æ—á–∫–∞ bash)
docker exec -u root -it outline bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ç–∏–ª–∏—Ç—ã curl (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π, —Ñ–ª–∞–≥ -y)
apt-get update && apt-get install -y curl
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ curl –∏ –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
curl --version
```

---

## üåê –°–µ—Ç—å

```bash
# –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å –∏—Ö IP-–∞–¥—Ä–µ—Å–∞–º–∏, MAC-–∞–¥—Ä–µ—Å–∞–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
ip a
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ IPv4-–∞–¥—Ä–µ—Å–∞ –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (–∏—Å–∫–ª—é—á–∞–µ—Ç IPv6)
ip -4 a
# –í—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ NetworkManager
nmcli
# –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, enp0s8): IP-–∞–¥—Ä–µ—Å, —à–ª—é–∑, DNS-—Å–µ—Ä–≤–µ—Ä—ã, MAC-–∞–¥—Ä–µ—Å –∏ —Ç.–¥
nmcli device show enp0s8
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ (–∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ IP, —à–ª—é–∑–∞, DNS)
nmtui
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ TCP-–ø–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—É—à–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ (-l), —Å –Ω–æ–º–µ—Ä–∞–º–∏ –ø–æ—Ä—Ç–æ–≤ (-n), –∏–º–µ–Ω–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (-p) –∏ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–º–µ–Ω —Ö–æ—Å—Ç–æ–≤ (-t –¥–ª—è TCP)
ss -ntlp
# –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å DNS-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã: —Ç–µ–∫—É—â–∏–µ DNS-—Å–µ—Ä–≤–µ—Ä—ã, –¥–æ–º–µ–Ω—ã –ø–æ–∏—Å–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNSSEC (—á–µ—Ä–µ–∑ systemd-resolved)
resolvectl status
```

---

## üìÄ –î–∏—Å–∫–∏ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

```bash
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Å–∫–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞
lsblk
# –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –¥–∏—Å–∫–æ–≤ –∏ –∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
ls -la /dev/sd*
```

---

## üß† –ü–∞–º—è—Ç—å –∏ —Å–ª—É–∂–±—ã

```bash
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (RAM) –∏ —Å–≤–æ–ø–∞ (Swap) –≤ —É–¥–æ–±–æ—á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–ì–ë/–ú–ë)
free -h
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–ª—É–∂–± systemd (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ .service)
sudo systemctl daemon-reload
# –î–æ–±–∞–≤–ª—è–µ—Ç —Å–ª—É–∂–±—É Elasticsearch –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É (enable) –∏ —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª—É–∂–±—É (--now)
sudo systemctl enable --now elasticsearch.service
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–ª—É–∂–±—É Logstash (–∞–∫—Ç—É–∞–ª—å–Ω–æ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤)
systemctl restart logstash.service
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Elasticsearch –Ω–∞ –ø–æ—Ä—Ç—É 9200. –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª–∞—Å—Ç–µ—Ä–µ
curl http://localhost:9200
```

---

## üêß –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

```bash
# –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
cat /etc/os-release
```

---

## üß± –†–∞–∑–º–µ—Ç–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∏—Å–∫–∞

```bash
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ç–∞–±–ª–∏—Ü—É —Ä–∞–∑–¥–µ–ª–æ–≤ –¥–∏—Å–∫–∞ /dev/sdb (—Ä–∞–∑–º–µ—Ä—ã, —Ç–∏–ø—ã, –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞)
fdisk -l /dev/sdb
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞–º–∏ –¥–∏—Å–∫–∞
fdisk /dev/sdb
# –î–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ fdisk:
# m ‚Äî –º–µ–Ω—é –∫–æ–º–∞–Ω–¥
# p ‚Äî —Ç–µ–∫—É—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞–∑–¥–µ–ª–æ–≤
# n ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª (primary/extended)
# w ‚Äî –∑–∞–ø–∏—Å–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤—ã–π—Ç–∏
# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–¥–µ–ª /dev/sdb1 –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ext4
mkfs.ext4 /dev/sdb1
# –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Å–∫–æ–≤ –∏ —Ä–∞–∑–¥–µ–ª–æ–≤ (–∏–º–µ–Ω–∞, —Ä–∞–∑–º–µ—Ä—ã, —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
lsblk
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç UUID –∏ —Ç–∏–ø —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ (–Ω—É–∂–µ–Ω –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ /etc/fstab)
blkid
# –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /mnt/disk1, /disk2 –∏ —Ç.–¥. –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤
# –§–ª–∞–≥ -p –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
mkdir -p /mnt/disk1 /mnt/disk2 /mnt/disk3 /mnt/disk4
# –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–¥–µ–ª /dev/sdb1 –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /mnt/disk1 (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
mount /dev/sdb1 /mnt/disk1
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
nano /etc/fstab
# –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
UUID=1234-ABCD /mnt/disk1 ext4 defaults 0 2
```

---

## ‚úÇÔ∏è –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ (sdb4 ‚Üí 5G)

```bash
# sdb      8:16   0   25G  0 disk   
# ‚îú‚îÄsdb1   8:17   0    5G  0 part   
# ‚îú‚îÄsdb2   8:18   0    5G  0 part   
# ‚îú‚îÄsdb3   8:19   0    5G  0 part   
# ‚îî‚îÄsdb4   8:20   0   10G  0 part   

# –ß—Ç–æ–±—ã —Ä–∞–∑–±–∏—Ç—å —Ä–∞–∑–¥–µ–ª /dev/sdb4 (10‚ÄØGB) –Ω–∞ –¥–≤–∞ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ 5‚ÄØGB, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π sdb4 (–µ—Å–ª–∏ –Ω–∞ –Ω—ë–º –Ω–µ—Ç –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö!):
# –ó–∞–ø—É—Å–∫ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–∑–¥–µ–ª–æ–≤ –¥–∏—Å–∫–∞ /dev/sdb
sudo fdisk /dev/sdb
# –î–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ fdisk:
# d ‚Üí 4 ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ /dev/sdb4
# n ‚Üí p ‚Üí 4 ‚Üí +5G ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ (p) /dev/sdb4 —Ä–∞–∑–º–µ—Ä–æ–º 5 GB
# n ‚Üí p ‚Üí 5 ‚Üí Enter ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ /dev/sdb5 –Ω–∞ –æ—Å—Ç–∞–≤—à–µ–º—Å—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ (5 GB)
# w ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –≤—ã—Ö–æ–¥
# –í–∞–∂–Ω–æ: –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É —Ç–µ–±—è –±—É–¥–µ—Ç 4 primary —Ä–∞–∑–¥–µ–ª–∞, sdb1‚Äìsdb4. –î–ª—è –ø—è—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å extended partition, –µ—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç primary-—Å–ª–æ—Ç–æ–≤
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞–∑–¥–µ–ª–∞—Ö –≤ —è–¥—Ä–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
sudo partprobe
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ext4
sudo mkfs.ext4 /dev/sdb4
sudo mkfs.ext4 /dev/sdb5
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–¥–µ–ª–æ–≤
fdisk /dev/sdb
```

---

## üóÉÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RAID 1 –Ω–∞ Ubuntu —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º mdadm

```bash
# –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /mnt/raid01 –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RAID-–º–∞—Å—Å–∏–≤–∞
mkdir /mnt/raid01
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å RAID-–º–∞—Å—Å–∏–≤–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ (–∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã, –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
cat /proc/mdstat
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É—Ç–∏–ª–∏—Ç—É mdadm –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ RAID-–º–∞—Å—Å–∏–≤–∞–º–∏ –≤ Linux
apt install mdadm
# –°–æ–∑–¥–∞–µ—Ç RAID 1 (–∑–µ—Ä–∫–∞–ª–æ) –∏–∑ –¥–≤—É—Ö —Ä–∞–∑–¥–µ–ª–æ–≤, –≥–¥–µ /dev/md127 ‚Äî –∏–º—è –º–∞—Å—Å–∏–≤–∞, -l 1 ‚Äî —É—Ä–æ–≤–µ–Ω—å RAID (–∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ), -n 2 ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
mdadm --create /dev/md127 -l 1 -n 2 /dev/sdb1 /dev/sdb2
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ RAID (–Ω–∞–ø—Ä–∏–º–µ—Ä, resync = 50%).
cat /proc/mdstat
# –í—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Å–∏–≤–µ:
# –°–æ—Å—Ç–æ—è–Ω–∏–µ (active, degraded)
# –°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (/dev/sdb1, /dev/sdb2)
# UUID –º–∞—Å—Å–∏–≤–∞
mdadm -D /dev/md127
# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç RAID-–º–∞—Å—Å–∏–≤ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ext4 (–≥–æ—Ç–æ–≤ –∫ —Ö—Ä–∞–Ω–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö)
mkfs.ext4 /dev/md127
# –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /mnt/raid01 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
mount /dev/md127 /mnt/raid01
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –≤—Å–µ—Ö —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –≤–∫–ª—é—á–∞—è RAID
df -h
# –ö–æ–ø–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ /var/log/ –≤ RAID-–º–∞—Å—Å–∏–≤ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤
cp -r /var/log/* /mnt/raid01
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª fstab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
nano /etc/fstab
# –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RAID
/dev/md127 /mnt/raid01 ext4 defaults 0 0

```

## üí• –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–∞ –¥–∏—Å–∫–∞ –≤ RAID 1 –∏ –µ–≥–æ –∑–∞–º–µ–Ω–∞

```bash
# –í—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Å–∏–≤–µ:
# –°–æ—Å—Ç–æ—è–Ω–∏–µ (active, degraded)
# –°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (/dev/sdb1, /dev/sdb2)
# UUID –º–∞—Å—Å–∏–≤–∞
mdadm -D /dev/md127
# –ü–æ–º–µ—á–∞–µ—Ç –¥–∏—Å–∫ /dev/sdb1 –∫–∞–∫ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω—ã–π (–∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–º–µ–Ω—ã)
mdadm /dev/md127 --fail /dev/sdb1
# –£–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω—ã–π –¥–∏—Å–∫ /dev/sdb1 –∏–∑ –º–∞—Å—Å–∏–≤–∞ (–ø–æ—Å–ª–µ --fail)
mdadm /dev/md127 --remove /dev/sdb1
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ RAID –Ω–∞ –¥–∏—Å–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±—ã–ª –ª–∏ –¥–∏—Å–∫ —á–∞—Å—Ç—å—é –º–∞—Å—Å–∏–≤–∞)
mdadm --examine /dev/sdX
# –û—á–∏—â–∞–µ—Ç —Å—É–ø–µ—Ä–±–ª–æ–∫ RAID –Ω–∞ –¥–∏—Å–∫–µ –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º (—É–¥–∞–ª—è–µ—Ç —Å–ª–µ–¥—ã —É—á–∞—Å—Ç–∏—è –≤ –º–∞—Å—Å–∏–≤–µ)
mdadm --zero-superblock /dev/sdX
# –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –¥–∏—Å–∫ /dev/sdb3 –≤ –º–∞—Å—Å–∏–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–∞—á–Ω–µ—Ç—Å—è —Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
mdadm /dev/md127 --add /dev/sdb3
# –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å RAID, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, resync = 75%)
cat /proc/mdstat
```

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ RAID 1 –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Linux

```bash
# –°–æ–∑–¥–∞—Ç—å RAID 1 –∏–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤, –≥–¥–µ –æ–¥–∏–Ω –¥–∏—Å–∫ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/dev/sdb1`)    
# –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –æ–±—ä–µ–¥–∏–Ω–∏–≤ –µ–≥–æ —Å –Ω–æ–≤—ã–º –¥–∏—Å–∫–æ–º (`/dev/sdb2`) –≤ –∑–µ—Ä–∫–∞–ª—å–Ω—ã–π RAID-–º–∞—Å—Å–∏–≤   

# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ –∏ –∏—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.
lsblk
# –°–æ–∑–¥–∞–µ—Ç RAID 1 —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
# /dev/md127 ‚Äî –∏–º—è –º–∞—Å—Å–∏–≤–∞
# -l 1 ‚Äî —É—Ä–æ–≤–µ–Ω—å RAID (–∑–µ—Ä–∫–∞–ª–æ)
# -n 2 ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
# /dev/sdb2 ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏—Å–∫
# missing ‚Äî –≤—Ç–æ—Ä–æ–π –¥–∏—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ (—á—Ç–æ–±—ã –Ω–µ —Å—Ç–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ /dev/sdb1)
mdadm --create /dev/md127 -l 1 -n 2 /dev/sdb2 missing
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–∞—Å—Å–∏–≤ —Å–æ–∑–¥–∞–Ω, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ degraded mode (—Ç–æ–ª—å–∫–æ —Å –æ–¥–Ω–∏–º –¥–∏—Å–∫–æ–º)
mdadm -D /dev/md127
# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç RAID-–º–∞—Å—Å–∏–≤ –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ext4 (–¥–∞–Ω–Ω—ã–µ –Ω–∞ /dev/sdb1 –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è)
mkfs.ext4 /dev/md127
# –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é /mnt/raid02 –¥–ª—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è RAID-–º–∞—Å—Å–∏–≤–∞
mkdir /mnt/raid02
# –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –º–∞—Å—Å–∏–≤ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
mount /dev/md127 /mnt/raid02
# –ö–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–∏—Å–∫–∞ (/mnt/raid01, –≥–¥–µ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω /dev/sdb1) –≤ –Ω–æ–≤—ã–π RAID-–º–∞—Å—Å–∏–≤
cp -r /mnt/raid01/* /mnt/raid02
# –û—Ç–∫–ª—é—á–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –¥–∏—Å–∫ (/dev/sdb1) –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤
umount /mnt/raid01
# –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∏—Å–∫ /dev/sdb1 –≤ –º–∞—Å—Å–∏–≤, –∑–∞–ø—É—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö (–∑–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å /dev/sdb2)
mdadm /dev/md127 --add /dev/sdb1
# –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –º–∞—Å—Å–∏–≤–∞ (–ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
mdadm -D /dev/md127
# –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, resync = 75%)
watch cat /proc/mdstat
# –û—Ç–∫–ª—é—á–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
umount /mnt/raid02
# –ü–æ–¥–∫–ª—é—á–∞–µ—Ç RAID-–º–∞—Å—Å–∏–≤ –∫ –∏—Å—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (/mnt/raid01), –∑–∞–º–µ–Ω—è—è —Å—Ç–∞—Ä—ã–π –¥–∏—Å–∫
mount /dev/md127 /mnt/raid01
```


## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- `README.md` ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª (—à–ø–∞—Ä–≥–∞–ª–∫–∞).
- –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, `.sh` —Ñ–∞–π–ª—ã –∏ —Ç.–¥.

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–õ–∏—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ. –ú–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è.
